# MESTA Compliance - Dokumentkrav ved bedriftsregistrering
## Sjekkliste for pÃ¥krevd dokumentasjon

---

## ğŸ¯ Ny funksjonalitet

Ved opprettelse av ny underentreprenÃ¸r (UE) kan du nÃ¥ velge hvilke dokumenter bedriften mÃ¥ levere for Ã¥ vÃ¦re i compliance. Dette gir fleksibilitet til Ã¥ tilpasse kravene per bedrift eller kontrakt.

---

## ğŸ“‹ Tilgjengelige dokumenttyper

### **Standard dokumenter (forhÃ¥ndsvalgt):**

#### **1. ğŸ§¾ Skatteattest**
- **Beskrivelse**: Bevis pÃ¥ innbetalt skatt
- **FormÃ¥l**: Verifisere at bedriften har betalt skatt
- **Gyldighet**: Vanligvis 3-6 mÃ¥neder
- **Kilde**: Skatteetaten

#### **2. ğŸ’° MVA-attest**
- **Beskrivelse**: Merverdiavgift i orden  
- **FormÃ¥l**: Bekrefte at MVA er betalt
- **Gyldighet**: Vanligvis 3 mÃ¥neder
- **Kilde**: Skatteetaten

#### **3. ğŸ¦º HMS-egenerklÃ¦ring**
- **Beskrivelse**: Helse, miljÃ¸ og sikkerhet
- **FormÃ¥l**: Dokumentere HMS-rutiner
- **Gyldighet**: 12 mÃ¥neder
- **Kilde**: Bedriften selv

### **Valgfrie dokumenter:**

#### **4. ğŸ›¡ï¸ Forsikringsbevis**
- **Beskrivelse**: Ansvars- og yrkesskadeforsikring
- **FormÃ¥l**: Verifisere forsikringsdekning
- **Gyldighet**: 12 mÃ¥neder
- **Kilde**: Forsikringsselskap

#### **5. ğŸ‘¥ Ansatteliste**
- **Beskrivelse**: Oversikt over ansatte pÃ¥ prosjekt
- **FormÃ¥l**: Kontrollere bemanning
- **Gyldighet**: LÃ¸pende oppdatert
- **Kilde**: Bedriften selv

#### **6. â­ Kvalitetssertifikat**
- **Beskrivelse**: ISO eller tilsvarende
- **FormÃ¥l**: Verifisere kvalitetssystem
- **Gyldighet**: 36 mÃ¥neder (avhengig av sertifikat)
- **Kilde**: Sertifiseringsorgan

#### **7. ğŸŒ± MiljÃ¸sertifikat**
- **Beskrivelse**: MiljÃ¸ledelsessystem
- **FormÃ¥l**: Dokumentere miljÃ¸arbeid
- **Gyldighet**: 36 mÃ¥neder
- **Kilde**: Sertifiseringsorgan

#### **8. ğŸ“œ Sentral godkjenning**
- **Beskrivelse**: For spesielle bransjer
- **FormÃ¥l**: Verifisere autorisasjon
- **Gyldighet**: Varierer
- **Kilde**: Direktoratet for byggkvalitet

---

## ğŸ”„ Brukerflyt

### **Metode 1: Via Proff.no sÃ¸k**

```
1. Klikk "â• Legg til bedrift"
   â†“
2. SÃ¸k pÃ¥ bedrift (navn eller org.nr)
   â†“
3. Velg bedrift fra resultatliste
   â†“
4. Skriv inn kontrakt-ID
   â†“
5. VELG DOKUMENTER (ny funksjonalitet!)
   â”œâ”€ âœ“ Skatteattest (forhÃ¥ndsvalgt)
   â”œâ”€ âœ“ MVA-attest (forhÃ¥ndsvalgt)
   â”œâ”€ âœ“ HMS-egenerklÃ¦ring (forhÃ¥ndsvalgt)
   â”œâ”€ â˜ Forsikringsbevis
   â”œâ”€ â˜ Ansatteliste
   â”œâ”€ â˜ Kvalitetssertifikat
   â”œâ”€ â˜ MiljÃ¸sertifikat
   â””â”€ â˜ Sentral godkjenning
   â†“
6. Klikk "âœ“ Bekreft og legg til"
   â†“
7. Success: "Bedrift AS er nÃ¥ registrert - 3 dokumenter pÃ¥krevd"
```

### **Metode 2: Manuell registrering**

```
1. Klikk "â• Legg til bedrift"
   â†“
2. Klikk "âœï¸ Registrer manuelt"
   â†“
3. Fyll ut:
   - Firmanavn
   - Org.nummer
   - Kontrakt-ID
   â†“
4. VELG DOKUMENTER (samme som over)
   â†“
5. Klikk "âœ“ Bekreft og legg til"
```

---

## ğŸ“Š Hvordan det vises i systemet

### **I bedriftsdetaljer:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ Compliance-sjekker                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Skatteattest                    [â³ Venter] â”‚ â† Gul bakgrunn
â”‚ Venter pÃ¥ dokumentasjon                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MVA-attest                      [â³ Venter] â”‚
â”‚ Venter pÃ¥ dokumentasjon                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HMS-egenerklÃ¦ring               [âœ“ OK]      â”‚ â† GrÃ¸nn bakgrunn
â”‚ Sjekket: 09.02.2025 14:30                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Status-badges:**
- ğŸŸ¢ **GrÃ¸nn** = OK (dokument levert og godkjent)
- ğŸŸ¡ **Gul** = VENTER (dokument ikke levert ennÃ¥)
- ğŸ”´ **RÃ¸d** = EXPIRED/AVVIST (dokument utlÃ¸pt eller avvist)

---

## ğŸ¯ Bruksscenarioer

### **Scenario 1: Standard entreprenÃ¸r**
```
Bedrift: Asfalt Service AS
Kontrakt: E18-2025-MESTA

PÃ¥krevde dokumenter:
âœ“ Skatteattest
âœ“ MVA-attest
âœ“ HMS-egenerklÃ¦ring

Rasjonale: Standard krav for alle entreprenÃ¸rer
```

### **Scenario 2: StÃ¸rre entreprenÃ¸r med kvalitetskrav**
```
Bedrift: Veidrift Norge AS
Kontrakt: E6-2025-MESTA

PÃ¥krevde dokumenter:
âœ“ Skatteattest
âœ“ MVA-attest
âœ“ HMS-egenerklÃ¦ring
âœ“ Forsikringsbevis
âœ“ Kvalitetssertifikat (ISO 9001)
âœ“ MiljÃ¸sertifikat (ISO 14001)

Rasjonale: StÃ¸rre kontrakt krever mer omfattende dokumentasjon
```

### **Scenario 3: Spesialisert arbeid**
```
Bedrift: Elektro Spesialisten AS
Kontrakt: RV35-2025-MESTA

PÃ¥krevde dokumenter:
âœ“ Skatteattest
âœ“ MVA-attest
âœ“ HMS-egenerklÃ¦ring
âœ“ Forsikringsbevis
âœ“ Sentral godkjenning (ElektroentreprenÃ¸r)

Rasjonale: Elektroarbeid krever sentral godkjenning
```

### **Scenario 4: Minimal dokumentasjon**
```
Bedrift: Liten Transport AS
Kontrakt: Kommunal-2025

PÃ¥krevde dokumenter:
âœ“ Skatteattest
âœ“ MVA-attest

Rasjonale: Mindre kontrakt, minimale krav
```

---

## âš™ï¸ Teknisk implementering

### **Data-struktur:**

```javascript
const newUE = {
    id: 'ue-004',
    name: 'Bedrift AS',
    orgNumber: '123456789',
    contractId: 'FV12-2025-MESTA',
    status: 'ACTIVE',
    
    // Nye felter:
    requiredDocuments: [
        'TAX_CERTIFICATE',
        'VAT_CERTIFICATE',
        'HMS_DECLARATION',
        'INSURANCE_CERTIFICATE'
    ],
    
    complianceChecks: [
        {
            code: 'TAX_CERTIFICATE',
            name: 'Skatteattest',
            status: 'PENDING',  // eller 'OK', 'EXPIRED'
            icon: 'â³',          // eller 'âœ“', 'âœ—'
            checkedAt: '2025-02-11T10:00:00Z'
        },
        // ... mer checks
    ]
};
```

### **Validering:**

```javascript
// Minst 1 dokument mÃ¥ velges
if (selectedDocs.length === 0) {
    alert('âš ï¸ Vennligst velg minst ett dokument');
    return;
}

// Maks 8 dokumenter (alle tilgjengelige)
// Ingen maksgrense enforced
```

### **Success-melding:**

```javascript
`${companyName} er nÃ¥ registrert i systemet
${selectedDocs.length} dokument${selectedDocs.length > 1 ? 'er' : ''} pÃ¥krevd`

// Eksempel output:
// "Bergvesen AS er nÃ¥ registrert i systemet
//  3 dokumenter pÃ¥krevd"
```

---

## ğŸ§ª Testing

### **Test 1: Standard valg (3 dokumenter)**
```
1. Legg til ny bedrift
2. La forhÃ¥ndsvalgte stÃ¥ (Skatteattest, MVA, HMS)
3. Bekreft
4. Resultat: 3 dokumenter pÃ¥krevd, alle status PENDING (gul)
```

### **Test 2: Alle dokumenter valgt**
```
1. Legg til ny bedrift
2. Huk av ALLE 8 checkboxes
3. Bekreft
4. Resultat: 8 dokumenter pÃ¥krevd
5. Ã…pne bedriftsdetaljer
6. Se alle 8 dokumenter listet under "Compliance-sjekker"
```

### **Test 3: Kun 1 dokument**
```
1. Legg til ny bedrift
2. Fjern alle unntatt "Skatteattest"
3. Bekreft
4. Resultat: 1 dokument pÃ¥krevd
```

### **Test 4: Ingen dokumenter (validering)**
```
1. Legg til ny bedrift
2. Fjern ALLE checkboxes
3. Klikk "Bekreft"
4. Resultat: Alert "âš ï¸ Vennligst velg minst ett dokument"
5. Kan ikke fortsette fÃ¸r minst 1 er valgt
```

### **Test 5: Manuell registrering**
```
1. Klikk "Registrer manuelt"
2. Fyll ut bedriftsinfo
3. Velg dokumenter (f.eks. 4 stk)
4. Bekreft
5. Resultat: Bedrift opprettet med 4 dokumenter
```

---

## ğŸ“Š Excel-export oppdatering

Dokumentkravene inkluderes automatisk i Excel-export:

### **Enkeltbedrift-export:**
```csv
COMPLIANCE-SJEKKER
Sjekk,Status,Tidspunkt
Skatteattest,PENDING,11.02.2025 10:00
MVA-attest,PENDING,11.02.2025 10:00
HMS-egenerklÃ¦ring,OK,11.02.2025 10:00
Forsikringsbevis,PENDING,11.02.2025 10:00
```

### **Oversikts-export:**
```csv
BEDRIFTSOVERSIKT
Bedriftsnavn,Org.nr,Dokumenter totalt,Dokumenter OK,Dokumenter venter
Bergvesen AS,987654321,4,1,3
Anlegg Nord AS,876543210,3,3,0
```

---

## ğŸ’¡ Best practices

### **For administratorer:**

1. **Standard-pakke**: Bruk forhÃ¥ndsvalgte (3 dok) for de fleste
2. **StÃ¸rre kontrakter**: Legg til Forsikring + Kvalitet/MiljÃ¸
3. **Spesialarbeid**: Legg til Sentral godkjenning nÃ¥r relevant
4. **Konsistens**: Bruk samme dokumentkrav for samme type kontrakt

### **For prosjektledere:**

1. **VÃ¦r spesifikk**: Velg kun dokumenter du faktisk trenger
2. **Ikke overdriv**: Flere dokumenter = mer arbeid for UE
3. **FÃ¸lg opp**: Sjekk at pending-dokumenter leveres
4. **Kommuniser**: Fortell UE hvilke dokumenter som kreves

### **Anbefalte kombinasjoner:**

```
Minimal (smÃ¥ kontrakter):
  âœ“ Skatteattest
  âœ“ MVA-attest

Standard (vanlige entreprenÃ¸rer):
  âœ“ Skatteattest
  âœ“ MVA-attest
  âœ“ HMS-egenerklÃ¦ring

Omfattende (store/kritiske kontrakter):
  âœ“ Skatteattest
  âœ“ MVA-attest
  âœ“ HMS-egenerklÃ¦ring
  âœ“ Forsikringsbevis
  âœ“ Kvalitetssertifikat
  âœ“ MiljÃ¸sertifikat

Spesialisert (fagbransjer):
  âœ“ Alle standard +
  âœ“ Sentral godkjenning
```

---

## ğŸ”® Fremtidige forbedringer

### **V2.1:**
- [ ] Sett utlÃ¸psdato per dokument
- [ ] Automatisk varsling fÃ¸r utlÃ¸p
- [ ] Last opp dokumenter direkte i systemet
- [ ] OCR-scanning av dokumenter

### **V2.2:**
- [ ] Template-profiler (spar dokumentvalg)
- [ ] Bulk-oppdatering av dokumentkrav
- [ ] Historikk over dokumentendringer
- [ ] Godkjenningsflyt for dokumenter

### **V3.0:**
- [ ] Integrasjon mot Altinn
- [ ] Automatisk henting fra offentlige registre
- [ ] Digital signering av dokumenter
- [ ] AI-validering av dokumentinnhold

---

## ğŸ“ Support

### **Vanlige spÃ¸rsmÃ¥l:**

**Q: Kan jeg endre dokumentkrav etter registrering?**
A: I V2.0 mÃ¥ du oppdatere manuelt i databasen. V2.1 vil ha edit-funksjon.

**Q: Hva skjer hvis jeg ikke velger noen dokumenter?**
A: Du fÃ¥r en feilmelding og mÃ¥ velge minst 1 dokument.

**Q: Kan jeg legge til egne dokumenttyper?**
A: Ikke i V2.0. Bruk de 8 tilgjengelige typene. Tilpasning kommer i V2.2.

**Q: Hvor ser jeg hvilke dokumenter som er pÃ¥krevd?**
A: Ã…pne bedriftsdetaljer â†’ Se "Compliance-sjekker" seksjonen.

**Q: Hvordan oppdaterer jeg status fra PENDING til OK?**
A: Manuelt i V2.0. V2.1 vil ha upload + godkjenning direkte i UI.

---

## âœ… Sjekkliste for produksjon

- [x] Dokumentvalg i sÃ¸keflyt
- [x] Dokumentvalg i manuell registrering
- [x] Validering (minst 1 dokument)
- [x] Success-melding viser antall
- [x] Compliance-sjekker viser riktig status
- [x] Farger: GrÃ¸nn (OK), Gul (PENDING), RÃ¸d (ERROR)
- [x] Excel-export inkluderer dokumenter
- [ ] Dokumentopplasting (kommer i V2.1)
- [ ] Edit dokumentkrav (kommer i V2.1)
- [ ] Automatisk status-oppdatering (kommer i V2.1)

---

**MESTA Compliance - Dokumentkrav implementert og produksjonsklart!**

*Siste oppdatering: 11. Februar 2025*
